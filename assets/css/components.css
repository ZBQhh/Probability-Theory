/* ==========================================================================
   FILE: assets/css/components.css
   æè¿°: UI ç»„ä»¶ (åµŒå…¥å¼é“¾æ¥ç‰ˆ - æç®€å¸ƒå±€)
   ========================================================================== */

/* ================== 1. ç¯å¢ƒå— (Block) ================== */
.block {
  position: relative;
  margin: 1.8em 0;
  padding: 1.2em 1.5em;
  border-radius: 8px;
  
  /* åŸºç¡€å¤–è§‚ (é…åˆ variables.css) */
  background: var(--block-bg); 
  box-shadow: var(--shadow);
  transition: box-shadow 0.3s ease, background 0.3s ease;
  overflow: hidden; 
  
  font-family: var(--font-body);
  color: var(--text);
  font-size: 1rem;
  line-height: 1.7;
}

/* ================== 2. æ ‡é¢˜åŒºåŸŸ ================== */
.env-heading {
  display: block; /* ç®€å•çš„å—çº§å…ƒç´  */
  width: 100%;
  margin-bottom: 0.8em;
  line-height: 1.5;
  
  font-family: var(--font-heading);
  color: var(--env-title-color);
  
  /* ğŸ’¥ å…³é”®ï¼šä¸å†éœ€è¦ç•™ç™½äº†ï¼Œå› ä¸ºæ²¡æœ‰æµ®åŠ¨æŒ‰é’®äº† */
  padding-right: 0; 
}

/* å¼ºåˆ¶æµå¼æ’ç‰ˆ */
.env-heading > * {
  display: inline;
  margin: 0;
  vertical-align: baseline;
}

/* ================== 3. ğŸ’¥ åµŒå…¥å¼é“¾æ¥æ ·å¼ (æ ¸å¿ƒä¿®æ”¹) ================== */
/* è¿™æ˜¯åŒ…è£¹ä½ "å®šä¹‰ 1.1" çš„é‚£ä¸ª <a> æ ‡ç­¾ */
.env-link {
  text-decoration: none;
  cursor: pointer;
  color: inherit; /* ç»§æ‰¿ç¯å¢ƒé¢œè‰² (è“è‰²/ç´«è‰²ç­‰) */
  transition: opacity 0.2s ease;
  
  /* å¯é€‰ï¼šä¸ºäº†è®©ç‚¹å‡»åŒºåŸŸç¨å¾®å¤§ä¸€ç‚¹ï¼Œä¸å®¹æ˜“ç‚¹æ­ª */
  padding: 2px 4px 2px 0;
  border-radius: 4px;
}

.env-link:hover {
  opacity: 0.8;
  text-decoration: none; /* æ‚¬æµ®æ—¶åŠ ä¸‹åˆ’çº¿æç¤ºå¯ç‚¹å‡» */
  text-underline-offset: 4px;
}

/* é—´è·æ§åˆ¶ */
.env-label {
  margin-right: 0.3em; 
}

.env-num {
  margin-right: 0.75em; /* å®šä¹‰1.1 ä¸ æ ‡é¢˜ çš„è·ç¦» */
  font-weight: bold;
}

/* æ ‡é¢˜æ–‡å­— */
.env-title {
  font-weight: bold;
  color: var(--env-title-color);
}

/* ================== 4. å…¬å¼çš„é“¾æ¥ (ä¿ç•™å° Â¶) ================== */
/* å› ä¸ºå…¬å¼æ˜¯å±…ä¸­çš„ï¼Œæ²¡æ³•åµŒå…¥ï¼Œæ‰€ä»¥ä¿ç•™è¿™ä¸ªå°æŒ‰é’® */
.permalink-formula {
  position: absolute;
  top: 0; right: 0;
  color: var(--muted);
  text-decoration: none;
  font-size: 1.2em;
  opacity: 0;
  transition: opacity 0.2s;
  cursor: pointer;
  font-family: sans-serif;
}
.math-display-block:hover .permalink-formula { opacity: 1; }
.permalink-formula:hover { color: var(--accent); }

/* ç¯å¢ƒæ­£æ–‡ */
.env-body { 
  display: block; width: 100%; clear: both;
  color: var(--text); 
}


/* ================== 5. å…¶ä»–ç»„ä»¶ (ä¿æŒä¸å˜) ================== */

/* TOC æŒ‰é’® */
.toc-toggle { transition: transform 0.3s ease, opacity 0.3s ease; z-index: 100; cursor: pointer; }
.toc-toggle.hidden { opacity: 0; pointer-events: none; transform: translateY(-20px); }

/* ç›®å½•åˆ—è¡¨ */
.toc { list-style: none; padding: 0; margin: 0; }
.toc-row { display: flex; align-items: center; justify-content: space-between; margin: 2px 0; border-radius: 6px; transition: background 0.2s; }
.toc-row:hover { background: var(--toc-hover); }
.toc-link { flex: 1; padding: 0.6em 0.5em; color: var(--toc-text); text-decoration: none; font-size: 0.95em; font-weight: 500; display: block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.toc-link.active { color: var(--accent); font-weight: 700; }
.toc-toggle-btn { width: 34px; height: 34px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: var(--muted); transition: transform 0.3s ease; }
.toc-toggle-btn:hover { color: var(--accent); }
.toc-item-h2 .toc-sub { display: block; padding-left: 1.2em; max-height: 1000px; overflow: hidden; transition: max-height 0.4s ease-out, opacity 0.4s ease; opacity: 1; }
.toc-item-h2.collapsed .toc-sub { max-height: 0; opacity: 0; }
.toc-item-h2.collapsed .toc-toggle-btn { transform: rotate(-90deg); }
.toc-item-h3 a { display: block; padding: 0.4em 0.5em 0.4em 1em; color: var(--toc-text); opacity: 0.85; text-decoration: none; font-size: 0.9em; border-left: 2px solid transparent; }
.toc-item-h3 a:hover { color: var(--accent); opacity: 1; }
.toc-item-h3 a.active { color: var(--accent); border-left-color: var(--accent); background: rgba(59, 130, 246, 0.1); opacity: 1; }

/* æœç´¢ */
.search-toggle { width: 100%; padding: 0.75rem 1rem; margin: 0.5rem 0; background: var(--block-bg); border: 1px solid var(--muted); opacity: 0.8; border-radius: 8px; cursor: pointer; font-size: 0.95rem; color: var(--text); display: flex; align-items: center; gap: 0.5rem; transition: all 0.2s ease; font-family: var(--font-heading); }
.search-toggle:hover { opacity: 1; border-color: var(--accent); transform: translateY(-1px); }
.search-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9999; background: rgba(0, 0, 0, 0.75); backdrop-filter: blur(4px); display: none; align-items: center; justify-content: center; animation: fadeIn 0.2s ease; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
.search-box { width: 90%; max-width: 600px; background: var(--bg); border: none; border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3); overflow: hidden; animation: slideDown 0.3s ease; max-height: 80vh; display: flex; flex-direction: column; }
@keyframes slideDown { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
#searchInput { width: 100%; padding: 1.2rem 1.5rem; border: none; border-bottom: 1px solid var(--muted); font-size: 1.1rem; outline: none; background: transparent; color: var(--text); font-family: inherit; box-sizing: border-box; }
#searchInput::placeholder { color: var(--muted); opacity: 0.6; }
#searchInput:focus { border-bottom-color: var(--accent); }
#searchResults { list-style: none; padding: 0; margin: 0; max-height: 400px; overflow-y: auto; flex: 1; }
#searchResults::-webkit-scrollbar { width: 8px; }
#searchResults::-webkit-scrollbar-track { background: var(--bg); }
#searchResults::-webkit-scrollbar-thumb { background: var(--muted); border-radius: 4px; }
#searchResults li { border-bottom: 1px solid var(--muted); opacity: 0.3; }
#searchResults li:last-child { border-bottom: none; }
#searchResults a { display: flex; align-items: center; gap: 0.75rem; padding: 1rem 1.5rem; text-decoration: none; color: var(--text); transition: background 0.2s ease; }
#searchResults a:hover { background: rgba(0,0,0,0.05); }

/* ç§»åŠ¨ç«¯é€‚é… */
@media (max-width: 600px) {
  .block { padding: 1em 1em; }
  .search-box { width: 95%; max-width: none; margin: 1rem; }
}
