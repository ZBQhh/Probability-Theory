/* ==========================================================================
   FILE: assets/css/base.css
   æè¿°: åŸºç¡€æ’ç‰ˆ + ç»Ÿä¸€çš„å…¬å¼å¸ƒå±€ (å¼ºåˆ¶ä¸æ¢è¡Œä¿®å¤)
   ========================================================================== */

/* ================== 1. åŸå§‹è§†è§‰æ ·å¼ (ä¿ç•™) ================== */
html { scroll-behavior: smooth; overflow-x: hidden; }

body {
  font-family: "Arial", "Noto Serif SC", serif;
  max-width: 100%;
  margin: 0; padding: 0;
  line-height: 1.85;
  background: var(--bg);
  color: var(--text);
  overflow-x: hidden;
  -webkit-text-size-adjust: 100%;
}

h1, h2, h3, h4, h5, h6 {
  font-family: "Source Han Sans SC", "æ€æºé»‘ä½“", "Microsoft YaHei", sans-serif;
  font-weight: 600; line-height: 1.4; color: var(--text);
  margin-top: 1.5em; margin-bottom: 0.75em; word-break: break-word;
}
h1 { font-size: 2.2em; margin-top: 0.5em; border-bottom: 3px solid var(--accent); padding-bottom: 0.3em; }
h2 { font-size: 1.8em; border-bottom: 2px solid var(--muted); padding-bottom: 0.25em; position: relative; padding-left: 0;
border-left: none; }
h3 { font-size: 1.15em; color: var(--text); position: relative; padding-left: 1.8em; margin-top: 1.2em; }

p { margin: 1em 0; text-align: justify; }
strong, b { font-weight: 600; color: var(--text); }
em, i { font-style: italic; }
a { color: var(--accent); text-decoration: none; transition: color 0.2s; }
a:hover { color: var(--c-theorem); text-decoration: underline; }

ul, ol { margin: 0em 0; padding-left: 1em; }
li { margin: 0.5em 0; }
blockquote { margin: 1.5em 0; padding: 1em 1.5em; border-left: 4px solid var(--accent); background: var(--bg); color: var(--muted); font-style: italic; }

code { font-family: "Consolas", "Monaco", monospace; background: rgba(0,0,0,0.05); padding: 0.2em 0.4em; border-radius: 4px; font-size: 0.9em; color: var(--accent); word-break: break-all; }
pre { background: rgba(0,0,0,0.05); padding: 1em; border-radius: 8px; overflow-x: auto; margin: 1.5em 0; max-width: 100%; }
pre code { background: none; padding: 0; color: inherit; }

hr { border: none; border-top: 2px solid var(--muted); margin: 2em 0; opacity: 0.3; }
:target { scroll-margin-top: 90px; }

@keyframes flash-highlight { 0% { background-color: rgba(255, 255, 0, 0.3); } 100% { background-color: transparent; } }
.highlight-flash { animation: flash-highlight 2s ease-out; border-radius: 4px; }
a.ref-link { color: var(--accent); border-bottom: 1px dashed var(--accent); padding: 0 2px; border-radius: 3px; }
a.ref-link:hover { background-color: rgba(74, 144, 226, 0.1); text-decoration: none; }


/* ==========================================================================
   2. æ•°å­¦å…¬å¼å¸ƒå±€ç³»ç»Ÿ (ç»Ÿä¸€å¸ƒå±€ç‰ˆ)
   ========================================================================== */

/* 1. åŸºç¡€å®¹å™¨ */
.math-display-block {
  width: 100%;
  margin: 1.5em 0;
  clear: both;
}

/* 2. æ»šåŠ¨ç¬¼å­ (å…¬å¼ä¸»ä½“) */
.math-scroll-view {
  /* Flex item è®¾ç½® */
  flex: 1; 
  width: 0; 
  min-width: 0;
  
  /* æ»šåŠ¨è®¾ç½® */
  overflow-x: auto; 
  overflow-y: hidden;
  text-align: center;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 6px;
}
/* æ»šåŠ¨æ¡ */
.math-scroll-view::-webkit-scrollbar, mjx-container::-webkit-scrollbar { height: 6px; background: transparent; }
.math-scroll-view::-webkit-scrollbar-thumb, mjx-container::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.1); border-radius: 4px; }
.math-scroll-view:hover::-webkit-scrollbar-thumb, mjx-container:hover::-webkit-scrollbar-thumb { background: var(--accent); }

/* 3. å³ä¾§ä¿¡æ¯æ  (åºå· + æ ‡é¢˜) */
.math-info {
  flex-shrink: 0;           /* ğŸ’¥ ä¸¥ç¦è¢«å‹ç¼© */
  margin-left: 1rem;        /* ğŸ’¥ ä¸å…¬å¼ä¿æŒè·ç¦» */
  
  display: flex;
  align-items: center;      /* å†…éƒ¨å‚ç›´å±…ä¸­ */
  justify-content: flex-end;
  
  font-size: 0.95em;
  color: var(--muted);
  white-space: nowrap;      /* ğŸ’¥ ä¸¥ç¦æ¢è¡Œ */
}

/* å…¬å¼åç§° (ä¾‹å¦‚ "å‹¾è‚¡å®šç†") */
.math-name {
  margin-left: 0.8em;       /* ä¸åºå·çš„é—´è· */
  font-style: italic;
  opacity: 0.8;
  color: var(--muted);      /* é»˜è®¤ä¸ºç°è‰² */
}

/* 4. MathJax å…œåº• */
mjx-container[display="true"] {
  display: block !important; overflow-x: auto !important; overflow-y: hidden;
  max-width: 100% !important; width: 100% !important; margin: 0.5em 0 !important; padding-bottom: 4px;
}
.math-scroll-view mjx-container[display="true"] {
  display: inline-block !important; overflow: visible !important;
  max-width: none !important; width: auto !important; margin: 0 !important; vertical-align: middle;
}
mjx-math { outline: none; }


/* ================== å“åº”å¼ä¸æ¡Œé¢å¸ƒå±€ ================== */

/* æ¡Œé¢ç«¯ï¼šæ‰€æœ‰å…¬å¼ï¼ˆæ— è®ºæ˜¯å¦å½©è‰²ï¼‰å¼ºåˆ¶å·¦å³æ’åˆ—ï¼Œä¸æ¢è¡Œ */
@media (min-width: 769px) {
  .math-display-block {
    display: flex;
    flex-wrap: nowrap;        /* ğŸ’¥ æ ¸å¿ƒä¿®å¤ï¼šç¦æ­¢æ¢è¡Œ */
    align-items: center;      /* ğŸ’¥ æ ¸å¿ƒä¿®å¤ï¼šå‚ç›´å±…ä¸­ */
    justify-content: space-between;
  }
}

/* ç§»åŠ¨ç«¯ï¼šå †å  */
@media (max-width: 768px) {
  .math-display-block { display: block; }
  .math-scroll-view { display: block; width: 100%; }
  
  /* æ‰‹æœºç«¯ä¿¡æ¯æ ï¼šå³å¯¹é½ï¼Œåœ¨ä¸‹æ–¹ */
  .math-info {
    display: block;
    width: 100%;
    margin-left: 0;
    text-align: right;
    padding-top: 4px;
    padding-right: 2px;
  }
}